<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üß¨ –î–ù–ö ‚Üí –∏–†–ù–ö –¢–†–ê–ù–°–ö–†–ò–ü–¶–ò–Ø</title>
    <style>
        /* –°–±—Ä–æ—Å –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
        }
        
        html {
            height: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a1f0a 0%, #051505 100%);
            color: #e0ffe0;
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç –¥–ª—è iPhone */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(50, 205, 50, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(50, 205, 50, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(50, 205, 50, 0.1) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ */
        .text-contrast {
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
        }
        
        /* –≠–∫—Ä–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ */
        .screen {
            display: none;
            padding: 10px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –®–∞–ø–∫–∞ */
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px 15px;
            background: rgba(0, 20, 0, 0.8);
            border-radius: 20px;
            border: 3px solid #32cd32;
            box-shadow: 
                0 0 30px rgba(50, 205, 50, 0.4),
                inset 0 0 20px rgba(50, 205, 50, 0.2);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            color: #32cd32;
            font-size: clamp(1.8em, 7vw, 2.8em);
            margin-bottom: 10px;
            text-shadow: 0 0 20px #32cd32, 0 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 1px;
            line-height: 1.2;
            font-weight: 800;
        }
        
        .subtitle {
            color: #c0ffc0;
            font-size: clamp(0.9em, 3.5vw, 1.1em);
            margin-bottom: 15px;
            line-height: 1.4;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É */
        .top-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            display: flex;
            gap: 8px;
            align-items: center;
            background: rgba(0, 10, 0, 0.9);
            padding: 8px 12px;
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(50, 205, 50, 0.4);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        
        .control-btn {
            background: rgba(50, 205, 50, 0.3);
            border: 2px solid #32cd32;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
            color: #32cd32;
            flex-shrink: 0;
            user-select: none;
        }
        
        .control-btn:active {
            background: rgba(50, 205, 50, 0.5);
            transform: scale(0.95);
        }
        
        .control-btn.muted {
            background: rgba(255, 100, 100, 0.3);
            border-color: #ff6b6b;
            color: #ff6b6b;
        }
        
        .volume-slider {
            width: 70px;
            background: rgba(144, 238, 144, 0.2);
            border-radius: 10px;
            padding: 5px;
            display: flex;
            align-items: center;
        }
        
        .volume-slider input {
            width: 100%;
            height: 4px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #32cd32, #90ee90);
            border-radius: 5px;
            outline: none;
        }
        
        .volume-slider input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #32cd32;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #001a00;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-board {
            background: rgba(0, 20, 0, 0.7);
            border-radius: 20px;
            padding: 20px 15px;
            border: 3px solid #32cd32;
            box-shadow: 
                0 0 25px rgba(50, 205, 50, 0.3),
                inset 0 0 15px rgba(50, 205, 50, 0.1);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        /* –°–ª–æ—Ç—ã –î–ù–ö */
        .slots-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
            padding: 0 5px;
        }
        
        .slot-wrapper {
            text-align: center;
            flex: 0 0 auto;
        }
        
        .slot {
            width: clamp(70px, 22vw, 100px);
            height: clamp(70px, 22vw, 100px);
            background: rgba(50, 205, 50, 0.2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(2.2em, 9vw, 3.5em);
            font-weight: bold;
            color: #32cd32;
            border: 3px solid #32cd32;
            box-shadow: 
                0 0 20px rgba(50, 205, 50, 0.6),
                inset 0 0 10px rgba(50, 205, 50, 0.3);
            text-shadow: 0 0 15px #32cd32;
            font-family: 'Courier New', monospace;
        }
        
        .slot.active {
            animation: pulse 2s infinite;
            background: rgba(50, 205, 50, 0.3);
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 0 20px rgba(50, 205, 50, 0.6); 
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 0 30px rgba(50, 205, 50, 0.9); 
            }
        }
        
        /* –û–±–ª–∞—Å—Ç—å –∑–∞–¥–∞–Ω–∏—è */
        .task-info {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 30, 0, 0.5);
            border-radius: 15px;
            border: 2px dashed #32cd32;
        }
        
        .task-text {
            font-size: clamp(1.2em, 4.5vw, 1.6em);
            color: #32cd32;
            margin-bottom: 12px;
            text-shadow: 0 0 10px rgba(50, 205, 50, 0.5);
            line-height: 1.3;
        }
        
        .amino-info {
            font-size: clamp(0.9em, 3.5vw, 1em);
            color: #c0ffc0;
            margin-top: 8px;
            line-height: 1.4;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* –¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏ */
        .table-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            margin: 15px 0;
            border-radius: 15px;
            background: rgba(0, 20, 0, 0.8);
            border: 2px solid #32cd32;
        }
        
        .table-container.expanded {
            max-height: 500px;
        }
        
        .transcription-table {
            padding: 15px;
            color: #90ee90;
        }
        
        .table-header {
            text-align: center;
            color: #32cd32;
            font-size: 1.1em;
            margin-bottom: 15px;
            text-shadow: 0 0 10px #32cd32;
            font-weight: bold;
        }
        
        .table-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px;
            border-bottom: 1px solid rgba(50, 205, 50, 0.3);
        }
        
        .table-row:last-child {
            border-bottom: none;
        }
        
        .table-cell {
            flex: 1;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .table-cell.dna {
            color: #32cd32;
        }
        
        .table-cell.arrow {
            color: #00bfff;
            font-size: 1.3em;
        }
        
        .table-cell.rna {
            color: #00bfff;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã */
        .table-toggle {
            background: rgba(50, 205, 50, 0.3);
            border: 2px solid #32cd32;
            border-radius: 25px;
            padding: 12px 20px;
            color: #32cd32;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            font-weight: bold;
            font-size: 0.95em;
            user-select: none;
            min-height: 44px;
        }
        
        .table-toggle:active {
            background: rgba(50, 205, 50, 0.5);
            transform: scale(0.95);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –≤–≤–æ–¥–∞ */
        .input-area {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
            padding: 0 5px;
        }
        
        .input-btn {
            width: clamp(60px, 20vw, 80px);
            height: clamp(60px, 20vw, 80px);
            font-size: clamp(1.8em, 8vw, 2.5em);
            background: rgba(50, 205, 50, 0.2);
            color: #32cd32;
            border: 2px solid #32cd32;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .input-btn:active {
            background: rgba(50, 205, 50, 0.5);
            transform: scale(0.92);
        }
        
        .input-btn.clear {
            background: rgba(255, 100, 100, 0.3);
            border-color: #ff6b6b;
            color: #ff9999;
        }
        
        .input-btn.clear:active {
            background: rgba(255, 100, 100, 0.5);
        }
        
        /* –û–±–ª–∞—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ */
        .answer-area {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 30, 0, 0.5);
            border-radius: 15px;
            border: 2px solid #32cd32;
        }
        
        .answer-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .answer-slot {
            width: clamp(60px, 20vw, 80px);
            height: clamp(60px, 20vw, 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(1.8em, 8vw, 2.5em);
            font-weight: bold;
            background: rgba(50, 205, 50, 0.1);
            border: 2px dashed #32cd32;
            border-radius: 12px;
            color: #90ee90;
            font-family: 'Courier New', monospace;
        }
        
        .answer-slot.filled {
            background: rgba(50, 205, 50, 0.3);
            border: 2px solid #32cd32;
            color: #32cd32;
            animation: pop 0.3s ease;
        }
        
        @keyframes pop {
            0% { transform: scale(0.5); opacity: 0; }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 20px;
            font-size: clamp(0.9em, 3.5vw, 1em);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: linear-gradient(135deg, #32cd32 0%, #228b22 100%);
            color: #001a00;
            border: 2px solid #90ee90;
            box-shadow: 0 4px 15px rgba(50, 205, 50, 0.5);
            position: relative;
            overflow: hidden;
            flex: 1 1 45%;
            min-width: 150px;
            min-height: 55px;
            max-width: 200px;
            white-space: nowrap;
            text-overflow: ellipsis;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn:active {
            transform: scale(0.96);
            box-shadow: 0 2px 10px rgba(50, 205, 50, 0.5);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ */
        #spinBtn {
            background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
            border-color: #ffb347;
        }
        
        #clearBtn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%);
            border-color: #ff8a8a;
        }
        
        #cellBtn {
            background: linear-gradient(135deg, #00bfff 0%, #1e90ff 100%);
            border-color: #63d2ff;
        }
        
        #backToGameBtn {
            background: linear-gradient(135deg, #32cd32 0%, #228b22 100%);
            border-color: #90ee90;
        }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 20, 0, 0.7);
            border-radius: 15px;
            border: 2px solid #32cd32;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stat-item {
            text-align: center;
            flex: 1 1 100px;
            min-width: 80px;
        }
        
        .stat-value {
            font-size: clamp(1.8em, 8vw, 2.5em);
            color: #32cd32;
            text-shadow: 0 0 15px #32cd32;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.8em;
            color: #c0ffc0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress {
            text-align: center;
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 30, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            margin: 12px 0;
            border: 2px solid #32cd32;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #32cd32, #90ee90, #32cd32);
            width: 0%;
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ */
        .result-message {
            text-align: center;
            font-size: clamp(0.95em, 3.8vw, 1.2em);
            min-height: 50px;
            margin: 20px 0;
            padding: 12px;
            border-radius: 12px;
            background: rgba(0, 30, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            line-height: 1.4;
            color: #e0ffe0;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* –≠–∫—Ä–∞–Ω –∫–ª–µ—Ç–∫–∏ */
        .cell-container {
            display: flex;
            justify-content: center;
            margin: 25px 0;
            padding: 0 10px;
        }
        
        .cell {
            width: min(85vw, 350px);
            height: min(85vw, 350px);
            position: relative;
            border-radius: 50%;
            background: rgba(0, 20, 0, 0.5);
            border: 3px dashed #32cd32;
            overflow: hidden;
            box-shadow: 
                0 0 25px rgba(50, 205, 50, 0.3),
                inset 0 0 20px rgba(50, 205, 50, 0.1);
        }
        
        .cell-part {
            position: absolute;
            opacity: 0.3;
            transition: all 0.8s ease;
            filter: grayscale(1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(2.5em, 10vw, 3.5em);
            color: #32cd32;
            text-shadow: 0 0 20px #32cd32;
            transform-origin: center;
        }
        
        .cell-part.active {
            opacity: 1;
            filter: grayscale(0);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(3deg); }
        }
        
        /* –ú–∞–≥–∞–∑–∏–Ω –∫–ª–µ—Ç–∫–∏ */
        .shop {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 25px 0;
            padding: 0 10px;
        }
        
        .shop-item {
            background: rgba(0, 20, 0, 0.7);
            border: 2px solid #32cd32;
            border-radius: 15px;
            padding: 15px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            user-select: none;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .shop-item:active {
            background: rgba(50, 205, 50, 0.3);
            transform: scale(0.97);
        }
        
        .shop-item.bought {
            opacity: 0.6;
            cursor: default;
            background: rgba(0, 20, 0, 0.5);
        }
        
        .shop-item.bought:active {
            transform: none;
            background: rgba(0, 20, 0, 0.5);
        }
        
        .shop-icon {
            font-size: clamp(2.2em, 8vw, 2.8em);
            margin-bottom: 8px;
            text-shadow: 0 0 15px currentColor;
        }
        
        .shop-title {
            font-size: clamp(1em, 3.5vw, 1.2em);
            color: #32cd32;
            margin-bottom: 6px;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        .shop-desc {
            color: #c0ffc0;
            font-size: 0.75em;
            margin-bottom: 10px;
            line-height: 1.3;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        .shop-price {
            color: #ffd700;
            font-size: 0.9em;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            margin-top: auto;
        }
        
        /* –ü–æ–ª–æ–∂–µ–Ω–∏–µ —á–∞—Å—Ç–µ–π –∫–ª–µ—Ç–∫–∏ */
        .nucleus { top: 15%; left: 15%; width: 65px; height: 65px; }
        .ribosome { top: 65%; left: 65%; width: 55px; height: 55px; }
        .mitochondria { top: 25%; left: 65%; width: 60px; height: 40px; }
        .golgi { top: 65%; left: 15%; width: 55px; height: 45px; }
        .er { top: 40%; left: 40%; width: 85px; height: 85px; }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–∞—Å–∞–Ω–∏–π */
        @media (hover: none) and (pointer: coarse) {
            .btn:active, .input-btn:active, .control-btn:active, 
            .shop-item:active, .table-toggle:active {
                transform: scale(0.95) !important;
                transition: transform 0.1s ease !important;
            }
            
            .input-btn:active {
                background: rgba(50, 205, 50, 0.4) !important;
            }
            
            .input-btn.clear:active {
                background: rgba(255, 100, 100, 0.5) !important;
            }
            
            .shop-item:active {
                background: rgba(50, 205, 50, 0.25) !important;
            }
            
            /* –£–ª—É—á—à–∞–µ–º –æ—Ç–∫–ª–∏–∫ –Ω–∞ –∫–∞—Å–∞–Ω–∏–µ */
            .game-board * {
                -webkit-tap-highlight-color: rgba(50, 205, 50, 0.3);
            }
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã */
        @media (max-width: 320px) {
            .slot, .answer-slot, .input-btn {
                width: 55px;
                height: 55px;
                font-size: 1.6em;
            }
            
            .btn {
                min-width: 130px;
                min-height: 50px;
                padding: 12px 15px;
                font-size: 0.8em;
            }
            
            .stats {
                gap: 8px;
            }
            
            .stat-item {
                min-width: 70px;
            }
            
            .top-controls {
                top: 5px;
                right: 5px;
                padding: 6px 8px;
            }
            
            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 1em;
            }
            
            .volume-slider {
                width: 55px;
            }
            
            h1 {
                font-size: 1.6em;
            }
        }
        
        /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
        @media (max-height: 600px) and (orientation: landscape) {
            .screen {
                padding: 5px;
            }
            
            header {
                margin-bottom: 10px;
                padding: 12px;
            }
            
            h1 {
                font-size: 1.6em;
                margin-bottom: 5px;
            }
            
            .game-board {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .slot, .answer-slot, .input-btn {
                width: 50px;
                height: 50px;
                font-size: 1.6em;
            }
            
            .controls {
                margin: 12px 0;
                gap: 6px;
            }
            
            .btn {
                padding: 10px 12px;
                font-size: 0.75em;
                min-width: 120px;
                min-height: 45px;
            }
            
            .shop {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }
        
        /* –ë–æ–ª—å—à–∏–µ —ç–∫—Ä–∞–Ω—ã */
        @media (min-width: 768px) {
            .screen {
                padding: 25px;
            }
            
            header {
                padding: 30px;
            }
            
            .controls {
                gap: 15px;
            }
            
            .btn {
                min-width: 160px;
                min-height: 60px;
                padding: 16px 30px;
                font-size: 1em;
            }
        }
        
        /* iPhone X –∏ –Ω–æ–≤–µ–µ - –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã */
        @supports (padding: max(0px)) {
            body {
                padding-left: max(10px, env(safe-area-inset-left));
                padding-right: max(10px, env(safe-area-inset-right));
                padding-top: max(10px, env(safe-area-inset-top));
                padding-bottom: max(10px, env(safe-area-inset-bottom));
            }
            
            .top-controls {
                top: max(10px, env(safe-area-inset-top));
                right: max(10px, env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="backgroundMusic" loop>
        <source src="sounds/background.mp3" type="audio/mpeg">
        <source src="sounds/background.ogg" type="audio/ogg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
    </audio>
    
    <audio id="spinSound">
        <source src="sounds/spin.mp3" type="audio/mpeg">
        <source src="sounds/spin.ogg" type="audio/ogg">
    </audio>
    
    <audio id="correctSound">
        <source src="sounds/correct.mp3" type="audio/mpeg">
        <source src="sounds/correct.ogg" type="audio/ogg">
    </audio>
    
    <audio id="wrongSound">
        <source src="sounds/wrong.mp3" type="audio/mpeg">
        <source src="sounds/wrong.ogg" type="audio/ogg">
    </audio>
    
    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div class="top-controls">
        <button class="control-btn" id="musicToggle" title="–ú—É–∑—ã–∫–∞ –≤–∫–ª/–≤—ã–∫–ª">
            üîä
        </button>
        <button class="control-btn" id="soundToggle" title="–ó–≤—É–∫–∏ –≤–∫–ª/–≤—ã–∫–ª">
            üí•
        </button>
        <button class="control-btn" id="tableToggle" title="–¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏">
            üìã
        </button>
        <div class="volume-slider">
            <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="0.5">
        </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
    <div id="gameScreen" class="screen active">
        <header>
            <h1>üé∞ –î–ù–ö ‚Üí –∏–†–ù–ö –¢–†–ê–ù–°–ö–†–ò–ü–¶–ò–Ø</h1>
            <div class="subtitle">–ü–µ—Ä–µ–≤–æ–¥–∏—Ç–µ –∫–æ–¥–æ–Ω—ã –î–ù–ö –≤ –∏–†–ù–ö –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ –±–µ–ª–∫–∏!</div>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="aminoCount">0</div>
                    <div class="stat-label">–ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="proteinCount">0</div>
                    <div class="stat-label">–ë–µ–ª–∫–æ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label">–û—á–∫–æ–≤</div>
                </div>
            </div>
        </header>
        
        <div class="game-board">
            <div class="task-info">
                <div class="task-text">
                    <span>–î–ù–ö:</span>
                    <div class="slots-container" id="dnaSlots">
                        <!-- –°–ª–æ—Ç—ã –î–ù–ö —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </div>
                    
                    <div style="font-size: 2em; color: #32cd32; margin: 10px 0;">‚Üì</div>
                    
                    <span style="color: #00bfff;">–∏–†–ù–ö:</span>
                    <div class="answer-display" id="rnaAnswer">
                        <!-- –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                    </div>
                </div>
                
                <div class="amino-info" id="aminoInfo">
                    –ù–∞–∂–º–∏—Ç–µ "–ö—Ä—É—Ç–∏—Ç—å" —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –î–ù–ö –∫–æ–¥–æ–Ω
                </div>
            </div>
            
            <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div style="text-align: center; margin: 10px 0;">
                <button class="table-toggle" id="tableToggleBtn">
                    <span>üìã</span>
                    <span id="tableToggleText">–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏</span>
                </button>
            </div>
            
            <div class="table-container" id="tableContainer">
                <div class="transcription-table">
                    <div class="table-header">üìä –¢–ê–ë–õ–ò–¶–ê –ö–û–ú–ü–õ–ò–ú–ï–ù–¢–ê–†–ù–û–°–¢–ò</div>
                    <div class="table-row">
                        <div class="table-cell dna">–î–ù–ö</div>
                        <div class="table-cell arrow">‚Üí</div>
                        <div class="table-cell rna">–∏–†–ù–ö</div>
                    </div>
                    <div class="table-row">
                        <div class="table-cell dna">–ê</div>
                        <div class="table-cell arrow">‚Üí</div>
                        <div class="table-cell rna">–£</div>
                    </div>
                    <div class="table-row">
                        <div class="table-cell dna">–¢</div>
                        <div class="table-cell arrow">‚Üí</div>
                        <div class="table-cell rna">–ê</div>
                    </div>
                    <div class="table-row">
                        <div class="table-cell dna">–ì</div>
                        <div class="table-cell arrow">‚Üí</div>
                        <div class="table-cell rna">–¶</div>
                    </div>
                    <div class="table-row">
                        <div class="table-cell dna">–¶</div>
                        <div class="table-cell arrow">‚Üí</div>
                        <div class="table-cell rna">–ì</div>
                    </div>
                </div>
            </div>
            
            <div class="input-area" id="inputArea">
                <!-- –ö–Ω–æ–ø–∫–∏ –£, –ê, –ì, –¶ —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <div class="result-message" id="resultMessage">
                üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ –¥–ª—è –≤–≤–æ–¥–∞ –∏–†–ù–ö
            </div>
            
            <div class="progress">
                <div style="color: #32cd32; font-size: 0.95em; margin-bottom: 8px;">
                    üî¨ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±–æ—Ä–∞ –±–µ–ª–∫–∞:
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="proteinProgress"></div>
                </div>
                <div id="progressText" style="color: #c0ffc0; margin-top: 8px; font-size: 0.9em;">
                    0/20 –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç
                </div>
            </div>
            
            <div class="controls">
                <button class="btn" id="spinBtn">
                    üé∞ –ö–†–£–¢–ò–¢–¨ –î–ù–ö
                </button>
                <button class="btn" id="checkBtn" disabled>
                    ‚úÖ –ü–†–û–í–ï–†–ò–¢–¨
                </button>
                <button class="btn" id="clearBtn">
                    üóëÔ∏è –û–ß–ò–°–¢–ò–¢–¨
                </button>
                <button class="btn" id="cellBtn">
                    üî¨ –ú–û–Ø –ö–õ–ï–¢–ö–ê
                </button>
            </div>
        </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –∫–ª–µ—Ç–∫–∏ -->
    <div id="cellScreen" class="screen">
        <header>
            <h1>üî¨ –ë–ò–û–õ–û–ì–ò–ß–ï–°–ö–ê–Ø –ö–õ–ï–¢–ö–ê</h1>
            <div class="subtitle">–°–æ–±–µ—Ä–∏—Ç–µ –∂–∏–≤—É—é –∫–ª–µ—Ç–∫—É —Å –ø–æ–º–æ—â—å—é –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –±–µ–ª–∫–æ–≤!</div>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="cellProteinCount">0</div>
                    <div class="stat-label">–ë–µ–ª–∫–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="boughtParts">0/5</div>
                    <div class="stat-label">–ß–∞—Å—Ç–µ–π –∫—É–ø–ª–µ–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalAminos">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç</div>
                </div>
            </div>
        </header>
        
        <div class="cell-container">
            <div class="cell" id="cell">
                <div class="cell-part nucleus" id="nucleus">üß¨</div>
                <div class="cell-part ribosome" id="ribosome">‚ö™</div>
                <div class="cell-part mitochondria" id="mitochondria">üîã</div>
                <div class="cell-part golgi" id="golgi">üì¶</div>
                <div class="cell-part er" id="er">üåÄ</div>
            </div>
        </div>
        
        <div class="shop" id="cellShop">
            <!-- –ú–∞–≥–∞–∑–∏–Ω –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ JS -->
        </div>
        
        <div class="back-to-game">
            <button class="btn" id="backToGameBtn">
                üéÆ –í–ï–†–ù–£–¢–¨–°–Ø –ö –ò–ì–†–ï
            </button>
        </div>
    </div>

    <script>
        // –ü—Ä–∞–≤–∏–ª–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –î–ù–ö ‚Üí –∏–†–ù–ö
        const transcriptionRules = {
            '–ê': '–£',  // –î–ù–ö –ê ‚Üí –∏–†–ù–ö –£
            '–¢': '–ê',  // –î–ù–ö –¢ ‚Üí –∏–†–ù–ö –ê
            '–ì': '–¶',  // –î–ù–ö –ì ‚Üí –∏–†–ù–ö –¶
            '–¶': '–ì'   // –î–ù–ö –¶ ‚Üí –∏–†–ù–ö –ì
        };

        // –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—ã –∏ –∏—Ö –∫–æ–¥–æ–Ω—ã
        const aminoAcids = [
            { dna: '–ê–¢–ì', rna: '–£–ê–¶', name: '–ú–µ—Ç–∏–æ–Ω–∏–Ω (—Å—Ç–∞—Ä—Ç)', color: '#FF00FF' },
            { dna: '–¢–ì–ì', rna: '–ê–¶–¶', name: '–¢—Ä–∏–ø—Ç–æ—Ñ–∞–Ω', color: '#FF6666' },
            { dna: '–ê–ê–¢', rna: '–£–£–ê', name: '–ê—Å–ø–∞—Ä–∞–≥–∏–Ω', color: '#00FFFF' },
            { dna: '–ê–ê–¶', rna: '–£–£–ì', name: '–ê—Å–ø–∞—Ä–∞–≥–∏–Ω', color: '#00FFFF' },
            { dna: '–ì–ê–¢', rna: '–¶–£–ê', name: '–ê—Å–ø–∞—Ä–∞–≥–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞', color: '#FF9900' },
            { dna: '–ì–ê–¶', rna: '–¶–£–ì', name: '–ê—Å–ø–∞—Ä–∞–≥–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞', color: '#FF9900' },
            { dna: '–¢–ì–¢', rna: '–ê–¶–ê', name: '–¶–∏—Å—Ç–µ–∏–Ω', color: '#FFFF00' },
            { dna: '–¢–ì–¶', rna: '–ê–¶–ì', name: '–¶–∏—Å—Ç–µ–∏–Ω', color: '#FFFF00' },
            { dna: '–¶–ê–ê', rna: '–ì–£–£', name: '–ì–ª—É—Ç–∞–º–∏–Ω', color: '#66FF66' },
            { dna: '–¶–ê–ì', rna: '–ì–£–¶', name: '–ì–ª—É—Ç–∞–º–∏–Ω', color: '#66FF66' },
            { dna: '–ì–ê–ê', rna: '–¶–£–£', name: '–ì–ª—É—Ç–∞–º–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞', color: '#FF66FF' },
            { dna: '–ì–ê–ì', rna: '–¶–£–¶', name: '–ì–ª—É—Ç–∞–º–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞', color: '#FF66FF' },
            { dna: '–¶–ê–¢', rna: '–ì–£–ê', name: '–ì–∏—Å—Ç–∏–¥–∏–Ω', color: '#00FF99' },
            { dna: '–¶–ê–¶', rna: '–ì–£–ì', name: '–ì–∏—Å—Ç–∏–¥–∏–Ω', color: '#00FF99' },
            { dna: '–ê–ê–ê', rna: '–£–£–£', name: '–õ–∏–∑–∏–Ω', color: '#9966FF' },
            { dna: '–ê–ê–ì', rna: '–£–£–¶', name: '–õ–∏–∑–∏–Ω', color: '#9966FF' },
            { dna: '–¢–¢–¢', rna: '–ê–ê–ê', name: '–§–µ–Ω–∏–ª–∞–ª–∞–Ω–∏–Ω', color: '#FF9966' },
            { dna: '–¢–¢–¶', rna: '–ê–ê–ì', name: '–§–µ–Ω–∏–ª–∞–ª–∞–Ω–∏–Ω', color: '#FF9966' },
            { dna: '–¢–ê–¢', rna: '–ê–£–ê', name: '–¢–∏—Ä–æ–∑–∏–Ω', color: '#66FFCC' },
            { dna: '–¢–ê–¶', rna: '–ê–£–ì', name: '–¢–∏—Ä–æ–∑–∏–Ω', color: '#66FFCC' },
            { dna: '–ê–¢–¢', rna: '–£–ê–ê', name: '–ò–∑–æ–ª–µ–π—Ü–∏–Ω', color: '#CC66FF' },
            { dna: '–ê–¢–¶', rna: '–£–ê–ì', name: '–ò–∑–æ–ª–µ–π—Ü–∏–Ω', color: '#CC66FF' },
            { dna: '–ê–¢–ê', rna: '–£–ê–£', name: '–ò–∑–æ–ª–µ–π—Ü–∏–Ω', color: '#CC66FF' },
            { dna: '–ì–¶–¢', rna: '–¶–ì–ê', name: '–ê–ª–∞–Ω–∏–Ω', color: '#FF0000' },
            { dna: '–ì–¶–¶', rna: '–¶–ì–ì', name: '–ê–ª–∞–Ω–∏–Ω', color: '#FF0000' },
            { dna: '–ì–¶–ê', rna: '–¶–ì–£', name: '–ê–ª–∞–Ω–∏–Ω', color: '#FF0000' },
            { dna: '–ì–¶–ì', rna: '–¶–ì–¶', name: '–ê–ª–∞–Ω–∏–Ω', color: '#FF0000' },
            { dna: '–¶–ì–¢', rna: '–ì–¶–ê', name: '–ê—Ä–≥–∏–Ω–∏–Ω', color: '#00FF00' },
            { dna: '–¶–ì–¶', rna: '–ì–¶–ì', name: '–ê—Ä–≥–∏–Ω–∏–Ω', color: '#00FF00' },
            { dna: '–¶–ì–ê', rna: '–ì–¶–£', name: '–ê—Ä–≥–∏–Ω–∏–Ω', color: '#00FF00' },
            { dna: '–¶–ì–ì', rna: '–ì–¶–¶', name: '–ê—Ä–≥–∏–Ω–∏–Ω', color: '#00FF00' },
            { dna: '–ì–ì–¢', rna: '–¶–¶–ê', name: '–ì–ª–∏—Ü–∏–Ω', color: '#0000FF' },
            { dna: '–ì–ì–¶', rna: '–¶–¶–ì', name: '–ì–ª–∏—Ü–∏–Ω', color: '#0000FF' },
            { dna: '–ì–ì–ê', rna: '–¶–¶–£', name: '–ì–ª–∏—Ü–∏–Ω', color: '#0000FF' },
            { dna: '–ì–ì–ì', rna: '–¶–¶–¶', name: '–ì–ª–∏—Ü–∏–Ω', color: '#0000FF' }
        ];

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = {
            currentAmino: null,
            userRNA: ['', '', ''],
            currentPosition: 0,
            aminoAcidsCollected: 0,
            totalAminoAcids: 0,
            proteins: 0,
            score: 0,
            usedAminos: new Set(),
            cellParts: {
                nucleus: false,
                ribosome: false,
                mitochondria: false,
                golgi: false,
                er: false
            },
            tableVisible: false
        };

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É–¥–∏–æ
        let audioSettings = {
            musicEnabled: true,
            soundsEnabled: true,
            volume: 0.5
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const dnaSlots = document.getElementById('dnaSlots');
        const rnaAnswer = document.getElementById('rnaAnswer');
        const aminoInfo = document.getElementById('aminoInfo');
        const inputArea = document.getElementById('inputArea');
        const spinBtn = document.getElementById('spinBtn');
        const checkBtn = document.getElementById('checkBtn');
        const clearBtn = document.getElementById('clearBtn');
        const cellBtn = document.getElementById('cellBtn');
        const backToGameBtn = document.getElementById('backToGameBtn');
        const resultMessage = document.getElementById('resultMessage');
        const aminoCount = document.getElementById('aminoCount');
        const proteinCount = document.getElementById('proteinCount');
        const scoreElement = document.getElementById('score');
        const proteinProgress = document.getElementById('proteinProgress');
        const progressText = document.getElementById('progressText');
        const tableContainer = document.getElementById('tableContainer');
        const tableToggleBtn = document.getElementById('tableToggleBtn');
        const tableToggleText = document.getElementById('tableToggleText');
        const tableToggleControl = document.getElementById('tableToggle');
        
        // –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã
        const backgroundMusic = document.getElementById('backgroundMusic');
        const spinSound = document.getElementById('spinSound');
        const correctSound = document.getElementById('correctSound');
        const wrongSound = document.getElementById('wrongSound');
        
        // –ö–æ–Ω—Ç—Ä–æ–ª—å –∞—É–¥–∏–æ
        const musicToggle = document.getElementById('musicToggle');
        const soundToggle = document.getElementById('soundToggle');
        const volumeControl = document.getElementById('volumeControl');
        
        // –≠–∫—Ä–∞–Ω –∫–ª–µ—Ç–∫–∏
        const gameScreen = document.getElementById('gameScreen');
        const cellScreen = document.getElementById('cellScreen');
        const cellProteinCount = document.getElementById('cellProteinCount');
        const boughtParts = document.getElementById('boughtParts');
        const totalAminos = document.getElementById('totalAminos');
        const cellShop = document.getElementById('cellShop');

        // –ù—É–∫–ª–µ–æ—Ç–∏–¥—ã –∏–†–ù–ö
        const rnaNucleotides = ['–£', '–ê', '–ì', '–¶'];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            createDNADisplay();
            createRNAAnswerDisplay();
            createInputButtons();
            createShopItems();
            setupAudioControls();
            setupTableToggle();
            setupMobileTouch();
            updateStats();
            startBackgroundMusic();
            spin();
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–∞—Å–∞–Ω–∏–π
        function setupMobileTouch() {
            // –î–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const interactiveElements = document.querySelectorAll('.btn, .input-btn, .control-btn, .table-toggle, .shop-item');
            
            interactiveElements.forEach(el => {
                // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏
                el.style.userSelect = 'none';
                el.style.webkitUserSelect = 'none';
                
                // –î–æ–±–∞–≤–ª—è–µ–º touch-—Å–æ–±—ã—Ç–∏—è
                el.addEventListener('touchstart', handleTouchStart, { passive: true });
                el.addEventListener('touchend', handleTouchEnd, { passive: true });
                el.addEventListener('touchcancel', handleTouchCancel, { passive: true });
                
                // –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
                el.addEventListener('touchmove', function(e) {
                    if (e.cancelable) {
                        e.preventDefault();
                    }
                }, { passive: false });
            });
        }

        function handleTouchStart(e) {
            const btn = e.currentTarget;
            btn.style.transform = 'scale(0.95)';
            
            // –î–ª—è –∫–Ω–æ–ø–æ–∫ –≤–≤–æ–¥–∞ –Ω—É–∫–ª–µ–æ—Ç–∏–¥–æ–≤
            if (btn.classList.contains('input-btn') && !btn.classList.contains('clear')) {
                btn.style.backgroundColor = 'rgba(50, 205, 50, 0.4)';
            }
        }

        function handleTouchEnd(e) {
            const btn = e.currentTarget;
            btn.style.transform = '';
            btn.style.backgroundColor = '';
            
            // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–ª–∏–∫
            setTimeout(() => {
                btn.click();
            }, 50);
        }

        function handleTouchCancel(e) {
            const btn = e.currentTarget;
            btn.style.transform = '';
            btn.style.backgroundColor = '';
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É–¥–∏–æ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
        function setupAudioControls() {
            updateVolume();
            
            musicToggle.addEventListener('click', () => {
                audioSettings.musicEnabled = !audioSettings.musicEnabled;
                if (audioSettings.musicEnabled) {
                    musicToggle.classList.remove('muted');
                    musicToggle.textContent = 'üîä';
                    backgroundMusic.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"));
                } else {
                    musicToggle.classList.add('muted');
                    musicToggle.textContent = 'üîá';
                    backgroundMusic.pause();
                }
                saveAudioSettings();
            });
            
            soundToggle.addEventListener('click', () => {
                audioSettings.soundsEnabled = !audioSettings.soundsEnabled;
                if (audioSettings.soundsEnabled) {
                    soundToggle.classList.remove('muted');
                    soundToggle.textContent = 'üí•';
                } else {
                    soundToggle.classList.add('muted');
                    soundToggle.textContent = 'üîá';
                }
                saveAudioSettings();
            });
            
            volumeControl.addEventListener('input', () => {
                audioSettings.volume = parseFloat(volumeControl.value);
                updateVolume();
                saveAudioSettings();
            });
            
            loadAudioSettings();
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
        function setupTableToggle() {
            tableToggleBtn.addEventListener('click', toggleTable);
            tableToggleControl.addEventListener('click', toggleTable);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            const savedTableState = localStorage.getItem('tableVisible');
            if (savedTableState !== null) {
                gameState.tableVisible = savedTableState === 'true';
                if (gameState.tableVisible) {
                    tableContainer.classList.add('expanded');
                    tableToggleText.textContent = '–°–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏';
                    tableToggleControl.textContent = 'üìã';
                }
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
        function toggleTable() {
            gameState.tableVisible = !gameState.tableVisible;
            
            if (gameState.tableVisible) {
                tableContainer.classList.add('expanded');
                tableToggleText.textContent = '–°–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏';
                tableToggleControl.textContent = 'üìã';
            } else {
                tableContainer.classList.remove('expanded');
                tableToggleText.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–∞—Ä–Ω–æ—Å—Ç–∏';
                tableToggleControl.textContent = 'üìã';
            }
            
            localStorage.setItem('tableVisible', gameState.tableVisible);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
        function updateVolume() {
            backgroundMusic.volume = audioSettings.volume;
            spinSound.volume = audioSettings.volume;
            correctSound.volume = audioSettings.volume;
            wrongSound.volume = audioSettings.volume;
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞—É–¥–∏–æ
        function saveAudioSettings() {
            localStorage.setItem('audioSettings', JSON.stringify(audioSettings));
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞—É–¥–∏–æ
        function loadAudioSettings() {
            const saved = localStorage.getItem('audioSettings');
            if (saved) {
                audioSettings = JSON.parse(saved);
                volumeControl.value = audioSettings.volume;
                
                if (!audioSettings.musicEnabled) {
                    musicToggle.classList.add('muted');
                    musicToggle.textContent = 'üîá';
                }
                
                if (!audioSettings.soundsEnabled) {
                    soundToggle.classList.add('muted');
                    soundToggle.textContent = 'üîá';
                }
            }
        }

        // –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏
        function startBackgroundMusic() {
            if (audioSettings.musicEnabled) {
                backgroundMusic.volume = audioSettings.volume;
                setTimeout(() => {
                    backgroundMusic.play().catch(e => {
                        console.log("–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞: —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");
                        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –º—É–∑—ã–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–∞—Å–∞–Ω–∏–∏
                        const activateMusic = () => {
                            backgroundMusic.play();
                            document.removeEventListener('touchstart', activateMusic);
                        };
                        document.addEventListener('touchstart', activateMusic, { once: true });
                    });
                }, 1000);
            }
        }

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞
        function playSound(soundElement) {
            if (audioSettings.soundsEnabled) {
                soundElement.currentTime = 0;
                soundElement.play().catch(e => console.log("–ó–≤—É–∫ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω"));
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –î–ù–ö
        function createDNADisplay() {
            dnaSlots.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const wrapper = document.createElement('div');
                wrapper.className = 'slot-wrapper';
                
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.id = `dnaSlot${i}`;
                slot.textContent = '?';
                
                const label = document.createElement('div');
                label.className = 'slot-label';
                label.textContent = `–ü–æ–∑–∏—Ü–∏—è ${i + 1}`;
                
                wrapper.appendChild(slot);
                wrapper.appendChild(label);
                dnaSlots.appendChild(wrapper);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∏–†–ù–ö
        function createRNAAnswerDisplay() {
            rnaAnswer.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const slot = document.createElement('div');
                slot.className = 'answer-slot';
                slot.id = `rnaSlot${i}`;
                slot.textContent = '_';
                rnaAnswer.appendChild(slot);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤–≤–æ–¥–∞ –∏–†–ù–ö
        function createInputButtons() {
            inputArea.innerHTML = '';
            
            rnaNucleotides.forEach(nuc => {
                const button = document.createElement('button');
                button.className = 'input-btn';
                button.textContent = nuc;
                button.dataset.nuc = nuc;
                button.onclick = () => addRNANucleotide(nuc);
                inputArea.appendChild(button);
            });
            
            const clearButton = document.createElement('button');
            clearButton.className = 'input-btn clear';
            clearButton.textContent = 'üóëÔ∏è';
            clearButton.onclick = clearRNAInput;
            inputArea.appendChild(clearButton);
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –∫–ª–µ—Ç–∫–∏
        function createShopItems() {
            const shopData = [
                { id: 'nucleus', icon: 'üß¨', title: '–Ø–î–†–û', desc: '–•—Ä–∞–Ω–∏—Ç –î–ù–ö –∫–ª–µ—Ç–∫–∏', cost: 1, color: '#FF00FF' },
                { id: 'ribosome', icon: '‚ö™', title: '–†–ò–ë–û–°–û–ú–ê', desc: '–°–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –±–µ–ª–∫–∏', cost: 1, color: '#00FFFF' },
                { id: 'mitochondria', icon: 'üîã', title: '–ú–ò–¢–û–•–û–ù–î–†–ò–Ø', desc: '–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏—è –∫–ª–µ—Ç–∫–∏', cost: 2, color: '#FFFF00' },
                { id: 'golgi', icon: 'üì¶', title: '–ê–ü–ü–ê–†–ê–¢ –ì–û–õ–¨–î–ñ–ò', desc: '–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–æ–ª–µ–∫—É–ª', cost: 1, color: '#FF9900' },
                { id: 'er', icon: 'üåÄ', title: '–≠–ü–°', desc: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞', cost: 2, color: '#00FF00' }
            ];
            
            shopData.forEach(item => {
                const shopItem = document.createElement('div');
                shopItem.className = 'shop-item';
                shopItem.dataset.id = item.id;
                shopItem.dataset.cost = item.cost;
                
                shopItem.innerHTML = `
                    <div class="shop-icon" style="color: ${item.color}">${item.icon}</div>
                    <div class="shop-title">${item.title}</div>
                    <div class="shop-desc">${item.desc}</div>
                    <div class="shop-price">–¶–µ–Ω–∞: ${item.cost} –±–µ–ª–∫${item.cost === 1 ? '' : '–∞'}</div>
                `;
                
                cellShop.appendChild(shopItem);
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—ã
        function getRandomAmino() {
            const availableAminos = aminoAcids.filter(a => !gameState.usedAminos.has(a.dna));
            
            if (availableAminos.length === 0) {
                gameState.usedAminos.clear();
                return getRandomAmino();
            }
            
            const randomAmino = availableAminos[Math.floor(Math.random() * availableAminos.length)];
            gameState.usedAminos.add(randomAmino.dna);
            return randomAmino;
        }

        // –í—Ä–∞—â–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤
        function spin() {
            clearRNAInput();
            resultMessage.textContent = 'üåÄ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –î–ù–ö –∫–æ–¥–æ–Ω...';
            checkBtn.disabled = true;
            
            playSound(spinSound);
            gameState.currentAmino = getRandomAmino();
            
            const slots = document.querySelectorAll('#dnaSlots .slot');
            slots.forEach((slot, index) => {
                slot.textContent = '?';
                slot.classList.add('active');
                
                let spins = 0;
                const spinInterval = setInterval(() => {
                    const dnaLetters = ['–ê', '–¢', '–ì', '–¶'];
                    const randomLetter = dnaLetters[Math.floor(Math.random() * 4)];
                    slot.textContent = randomLetter;
                    slot.style.color = `hsl(${Math.random() * 120 + 80}, 100%, 70%)`;
                    spins++;
                    
                    if (spins > 6) {
                        clearInterval(spinInterval);
                        setTimeout(() => {
                            slot.textContent = gameState.currentAmino.dna[index];
                            slot.style.color = '#32cd32';
                            slot.classList.remove('active');
                        }, 200);
                    }
                }, 100);
            });
            
            setTimeout(() => {
                aminoInfo.innerHTML = `
                    <span style="color: ${gameState.currentAmino.color}">
                        üß¨ –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–∞: <strong>${gameState.currentAmino.name}</strong>
                    </span><br>
                    <small style="color: #c0ffc0">
                        –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –î–ù–ö –≤ –∏–†–ù–ö –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
                    </small>
                `;
                
                resultMessage.innerHTML = `
                    <div style="color: #00bfff;">
                        üí° –ó–∞–¥–∞–Ω–∏–µ: –í–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–†–ù–ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                    </div>
                    <div style="margin-top: 8px; font-size: 0.9em; color: #c0ffc0;">
                        –î–ù–ö: <strong>${gameState.currentAmino.dna}</strong> ‚Üí –∏–†–ù–ö: ?
                    </div>
                `;
                
                checkBtn.disabled = false;
                updateCurrentPosition(0);
            }, 1000);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω—É–∫–ª–µ–æ—Ç–∏–¥–∞ –∏–†–ù–ö
        function addRNANucleotide(nuc) {
            if (gameState.currentPosition >= 3) return;
            
            gameState.userRNA[gameState.currentPosition] = nuc;
            updateRNADisplay();
            updateCurrentPosition(gameState.currentPosition + 1);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–†–ù–ö
        function updateRNADisplay() {
            const rnaSlots = document.querySelectorAll('.answer-slot');
            rnaSlots.forEach((slot, index) => {
                if (gameState.userRNA[index]) {
                    slot.textContent = gameState.userRNA[index];
                    slot.className = 'answer-slot filled';
                    slot.style.color = '#00bfff';
                } else {
                    slot.textContent = '_';
                    slot.className = 'answer-slot';
                    slot.style.color = '#90ee90';
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
        function updateCurrentPosition(pos) {
            gameState.currentPosition = pos;
        }

        // –û—á–∏—Å—Ç–∫–∞ –≤–≤–æ–¥–∞
        function clearRNAInput() {
            gameState.userRNA = ['', '', ''];
            gameState.currentPosition = 0;
            updateRNADisplay();
        }

        // –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –î–ù–ö ‚Üí –∏–†–ù–ö
        function transcribeDNAtoRNA(dna) {
            return dna.split('').map(letter => transcriptionRules[letter] || '?').join('');
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
        function checkAnswer() {
            const userRNA = gameState.userRNA.join('');
            
            if (userRNA.length < 3) {
                resultMessage.innerHTML = '<div style="color: #ffd700;">‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ —Ç—Ä–∏ –ø–æ–∑–∏—Ü–∏–∏!</div>';
                return;
            }
            
            const correctRNA = transcribeDNAtoRNA(gameState.currentAmino.dna);
            gameState.totalAminoAcids++;
            
            if (userRNA === correctRNA) {
                gameState.aminoAcidsCollected++;
                gameState.score += 150;
                playSound(correctSound);
                
                resultMessage.innerHTML = `
                    <div style="color: #00ff00; font-size: 1.1em;">
                        ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!
                    </div>
                    <div style="margin-top: 10px; color: #c0ffc0; font-size: 0.9em;">
                        –î–ù–ö: <strong>${gameState.currentAmino.dna}</strong> ‚Üí 
                        –∏–†–ù–ö: <strong style="color: #00bfff">${userRNA}</strong><br>
                        üß¨ –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–∞: <span style="color: ${gameState.currentAmino.color}">
                            ${gameState.currentAmino.name}
                        </span>
                    </div>
                `;
                
                if (gameState.aminoAcidsCollected >= 20) {
                    gameState.proteins++;
                    gameState.aminoAcidsCollected = 0;
                    
                    setTimeout(() => {
                        resultMessage.innerHTML += `
                            <div style="color: #00ff00; font-size: 1.2em; margin-top: 10px;">
                                üéâ –í–´ –°–û–ë–†–ê–õ–ò –ë–ï–õ–û–ö! üéâ<br>
                                <small style="font-size: 0.8em;">–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å —á–∞—Å—Ç—å –∫–ª–µ—Ç–∫–∏!</small>
                            </div>
                        `;
                        playSound(correctSound);
                        showConfetti();
                    }, 500);
                }
                
                setTimeout(() => {
                    spin();
                }, 1500);
                
            } else {
                playSound(wrongSound);
                
                resultMessage.innerHTML = `
                    <div style="color: #ff6b6b; font-size: 1.1em;">
                        ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
                    </div>
                    <div style="margin-top: 10px; color: #c0ffc0; font-size: 0.9em;">
                        –í–∞—à –æ—Ç–≤–µ—Ç: <strong style="color: #ff9999">${userRNA}</strong><br>
                        –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –î–ù–ö <strong>${gameState.currentAmino.dna}</strong> ‚Üí 
                        –∏–†–ù–ö <strong style="color: #00bfff">${correctRNA}</strong><br>
                        üß¨ –ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç–∞: <span style="color: ${gameState.currentAmino.color}">
                            ${gameState.currentAmino.name}
                        </span>
                    </div>
                `;
            }
            
            checkBtn.disabled = true;
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            aminoCount.textContent = gameState.aminoAcidsCollected;
            proteinCount.textContent = gameState.proteins;
            scoreElement.textContent = gameState.score;
            totalAminos.textContent = gameState.totalAminoAcids;
            
            const progress = (gameState.aminoAcidsCollected / 20) * 100;
            proteinProgress.style.width = `${progress}%`;
            progressText.textContent = `${gameState.aminoAcidsCollected}/20 –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç`;
            
            updateCellScreen();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –∫–ª–µ—Ç–∫–∏
        function goToCellScreen() {
            gameScreen.classList.remove('active');
            cellScreen.classList.add('active');
            updateCellScreen();
        }

        // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–µ
        function goToGameScreen() {
            cellScreen.classList.remove('active');
            gameScreen.classList.add('active');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –∫–ª–µ—Ç–∫–∏
        function updateCellScreen() {
            cellProteinCount.textContent = gameState.proteins;
            
            let boughtCount = 0;
            Object.values(gameState.cellParts).forEach(bought => {
                if (bought) boughtCount++;
            });
            boughtParts.textContent = `${boughtCount}/5`;
            
            Object.keys(gameState.cellParts).forEach(partId => {
                const partElement = document.getElementById(partId);
                if (partElement) {
                    if (gameState.cellParts[partId]) {
                        partElement.classList.add('active');
                    } else {
                        partElement.classList.remove('active');
                    }
                }
            });
            
            const shopItems = document.querySelectorAll('.shop-item');
            shopItems.forEach(item => {
                const partId = item.dataset.id;
                const cost = parseInt(item.dataset.cost);
                
                if (gameState.cellParts[partId]) {
                    item.classList.add('bought');
                    item.innerHTML += '<div style="color: #00ff00; margin-top: 8px; font-weight: bold; font-size: 0.8em;">‚úÖ –ö–£–ü–õ–ï–ù–û</div>';
                } else if (gameState.proteins >= cost) {
                    item.classList.remove('bought');
                    item.onclick = () => buyCellPart(partId, cost);
                } else {
                    item.classList.add('bought');
                    item.onclick = null;
                    item.style.opacity = '0.5';
                }
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —á–∞—Å—Ç–∏ –∫–ª–µ—Ç–∫–∏
        function buyCellPart(partId, cost) {
            if (gameState.proteins >= cost && !gameState.cellParts[partId]) {
                gameState.proteins -= cost;
                gameState.cellParts[partId] = true;
                gameState.score += cost * 500;
                
                playSound(correctSound);
                const partElement = document.getElementById(partId);
                partElement.style.transform = 'scale(1.5)';
                setTimeout(() => {
                    partElement.style.transform = 'scale(1)';
                }, 300);
                
                if (Object.values(gameState.cellParts).every(x => x)) {
                    setTimeout(() => {
                        resultMessage.innerHTML = `
                            <div style="color: #00ff00; font-size: 1.3em; text-align: center;">
                                üéâ –ü–û–ë–ï–î–ê! –í—ã —Å–æ–±—Ä–∞–ª–∏ –∂–∏–≤—É—é –∫–ª–µ—Ç–∫—É! üéâ
                            </div>
                        `;
                        playSound(correctSound);
                        showConfetti();
                    }, 500);
                }
                
                updateStats();
            }
        }

        // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏
        function showConfetti() {
            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.background = `hsl(${Math.random() * 120 + 80}, 100%, 70%)`;
                confetti.style.borderRadius = '50%';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = '-20px';
                confetti.style.zIndex = '9999';
                confetti.style.pointerEvents = 'none';
                document.body.appendChild(confetti);
                
                const animation = confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 720}deg)`, opacity: 0 }
                ], {
                    duration: 2000 + Math.random() * 2000,
                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        spinBtn.addEventListener('click', spin);
        checkBtn.addEventListener('click', checkAnswer);
        clearBtn.addEventListener('click', clearRNAInput);
        cellBtn.addEventListener('click', goToCellScreen);
        backToGameBtn.addEventListener('click', goToGameScreen);

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                backgroundMusic.pause();
            } else if (audioSettings.musicEnabled) {
                backgroundMusic.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"));
            }
        });

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        initGame();
    </script>
</body>
</html>
